<!DOCTYPE html>
<html lang="en">
<head>
<!-- Basic Page Needs
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<title>TIL: Execute current line in vim - Guru Das Srinagesh</title>
<meta charset="utf-8">
<meta name="author" content="Guru Das Srinagesh">
<meta property="og:image" content="https://gurudas.dev/theme/images/favicon-og.png" />
<meta property="og:title" content="TIL: Execute current line in vim - Guru Das Srinagesh" />

<!-- Mobile Specific Metas
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- FONT
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css2?family=Crimson+Pro&family=Source+Code+Pro&display=swap" rel="stylesheet">

<!-- CSS
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<link rel="stylesheet" href="https://gurudas.dev/theme/css/normalize.css">
<link rel="stylesheet" href="https://gurudas.dev/theme/css/skeleton.css">
<link rel="stylesheet" href="https://gurudas.dev/theme/css/custom.css">
<link rel="stylesheet" href="https://gurudas.dev/theme/css/codehighlight.css">

<!-- Scripts
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
<script src="https://gurudas.dev/theme/js/site.js"></script>

<!-- Favicon
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<link rel="icon" type="image/png" href="https://gurudas.dev/theme/images/favicon.png">


<!-- Add canonical link to solve Page Indexing issues
––––––––––––––––––––––––––––––––––––––––––––––––- -->
  <link rel="canonical" href="https://gurudas.dev/til/vim-execute-current-line-in-bash/" />
  <meta property="og:url" content="https://gurudas.dev/til/vim-execute-current-line-in-bash/" />
  <meta property="og:type" content="article" />
  <meta name="description" content="How to easily execute the currently highlighted line in vim">
  <meta property="og:description" content="How to easily execute the currently highlighted line in vim">
</head>
<body>

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div class="container">

  <div class="navbar">
    <div class="container-nav">
      <ul class="navbar-list">
        <li class="navbar-item">
          <a class="navbar-link" href="https://gurudas.dev/#" data-popover="#meNavPopover">Me</a>
          <div id="meNavPopover" class="popover">
            <ul class="popover-list">
              <li class="popover-item"><a class="popover-link" href="https://gurudas.dev/#about">About</a></li>
              <li class="popover-item"><a class="popover-link" href="https://gurudas.dev/#contact">Contact</a></li>
            </ul>
          </div>
        </li>
        <li class="navbar-item"><a class="navbar-link" href="https://gurudas.dev/now/">Now</a></li>
        <li class="navbar-item">
          <a class="navbar-link" href="https://gurudas.dev/#" data-popover="#etcNavPopover">Etc</a>
          <div id="etcNavPopover" class="popover">
            <ul class="popover-list">
              <li class="popover-item"><a class="popover-link" href="https://gurudas.dev/uses/">Uses</a></li>
              <li class="popover-item"><a class="popover-link" href="https://gurudas.dev/til/">TIL</a></li>
              <li class="popover-item"><a class="popover-link" href="https://gurudas.dev/quotes/">Quotes</a></li>
            </ul>
          </div>
        </li>
        <li class="navbar-item"><a class="navbar-link" href="https://gurudas.dev/blog/">Blog</a></li>
      </ul>
    </div>
  </div>
    <section class="header">
      <h2><a class="title-link" href="https://gurudas.dev">Guru Das Srinagesh</a></h2>
    </section>

<div class="page-section">
<h4><a href="https://gurudas.dev/til/vim-execute-current-line-in-bash/">TIL: Execute current line in vim</a></h4>
<h6 style="margin-top: -2%"> <b>29 Jul 2024</b> </h6>
<p>I write a lot of notes in Markdown on a daily basis as a sort of personal wiki.
Almost all of them contain code snippets - shell commands, mostly. Today I learnt
that there is a much better way to directly execute a shell command listed on its own
in a single line in <code>vim</code>.</p>
<p>Two ways, in fact.</p>
<h5 id="the-first">The first</h5>
<div class="highlight"><pre><span></span><code>.w<span class="w"> </span>!bash
</code></pre></div>

<p>The fullstop character used here has special significance - it refers to the current
line. From <code>:help cmdline-ranges</code>:</p>
<div class="highlight"><pre><span></span><code>Some Ex commands accept a line range in front of them.  This is noted as
[range].  It consists of one or more line specifiers, separated with &#39;,&#39; or
&#39;;&#39;.

...

Line numbers may be specified with:     :range {address}
    {number}        an absolute line number  E1247
    .               the current line                :.
</code></pre></div>

<p>The space between the <code>w</code> and the <code>!</code> is important here. Without it, the current file
would be saved with filename <code>bash</code>, which is not what we want to happen.</p>
<p>From <code>:help !</code>:</p>
<div class="highlight"><pre><span></span><code>4.1 Filter commands                 *filter*

A filter is a program that accepts text at standard input, changes it in some
way, and sends it to standard output.  You can use the commands below to send
some text through a filter, so that it is replaced by the filter output.
Examples of filters are &quot;sort&quot;, which sorts lines alphabetically, and
&quot;indent&quot;, which formats C program files (you need a version of indent that
works like a filter; not all versions do).  The &#39;shell&#39; option specifies the
shell Vim uses to execute the filter command (See also the &#39;shelltype&#39;
option).  You can repeat filter commands with &quot;.&quot;.  Vim does not recognize a
comment (starting with &#39;&quot;&#39;) after the `:!` command.

                            *!*
!{motion}{filter}   Filter {motion} text lines through the external
                    program {filter}.
</code></pre></div>

<h5 id="the-second">The second</h5>
<p>The second method is also documented a few lines from above:</p>
<div class="highlight"><pre><span></span><code>                            *!!*
!!{filter}          Filter [count] lines through the external program
                    {filter}.
</code></pre></div>

<p>Just need to say <code>!!bash</code> (note: no preceding <code>:</code>).</p>
<p>But this will overwrite the contents of the current line with the output of the
command in that line.</p>
<h5 id="addendum">Addendum</h5>
<p>This same trick can be used to insert a date in a Markdown file: <code>!!date</code></p>
</div>
<p>
		<tt><a href="https://gurudas.dev/tag/vim/" class="tag">vim</a></tt>
</p>
<hr>
<div class="row">
	<div class="six columns">
		<div style="text-align: left">&lt; Previous
			<br>
		<a href="https://gurudas.dev/til/tmux-cycle-through-all-open-sessions/">
			TIL: Easily cycle through all open tmux sessions
		</a>
		</div>
	</div>
	<div class="six columns">
		<div style="text-align: right">Next &gt;
			<br>
		<a href="https://gurudas.dev/til/using-fzf-vim-ag-bash/">
			TIL: The fzf fuzzy finder is amazing
		</a>
		</div>
	</div>
</div>


  </div>

  <footer>

<p class="footer">
⭐<br>
&copy; 2023-26 Guru Das Srinagesh | <a href="https://gurudas.dev/feed.atom.xml"><img src="https://gurudas.dev/images/rss.svg" style=height:.8em;margin-right:.2em> Feed </a>
</p>
  </footer>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>